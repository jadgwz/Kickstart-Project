# Generated by Anaconda 40.22.3
# Generated by pykickstart v3.52
#version=DEVEL
# Use text install
text

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'

# System language
lang en_US.UTF-8

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.9.1
# Partition clearing information
ignoredisk --only-use=sda
autopart
clearpart --none --initlabel

# System timezone
timezone Asia/Kuala_Lumpur --utc

# Root password and User Setup
rootpw --plaintext redhat

# authselect profile
authselect select sssd

# SELinux Policy
selinux --enforcing

# Enable and disable system services
# Script will disabled first before install package, then runs enabled service
services --disabled="kdump,rhsmcertd" --enabled="sshd,rngd,chronyd,docker,firewalld,httpd,mariadb"

# Accept EULA
eula --agree

# Package to be installed
%packages
@^server-product-environment
@container-management
@core
openssh-server
chrony
docker
docker-compose
samba
nfs-utils
rsync
httpd
mariadb-server
php
kodi
git
gcc
make
python3
firewalld
openvpn
bind
htop
nmon
cockpit
nano
wget
curl
zip
unzip
%end


# Post-Installation Script
%post
# Enable necessary services
systemctl enable sshd
systemctl enable chronyd
systemctl enable docker
systemctl enable httpd
systemctl enable mariadb
systemctl enable firewalld

# Configure firewall to allow necessary ports
firewall-cmd --add-service=http --permanent
firewall-cmd --add-service=samba --permanent
firewall-cmd --add-service=nfs --permanent
firewall-cmd --reload

# Complete
echo "Kickstart script has completed" > /root/kickstart_done

shutdown

%end


